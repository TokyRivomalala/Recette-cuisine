import{a as j}from"./chunk-475QT6HF.js";import{a as R,d as q,e as F,g as D,i as H,j as O,p as Q,q as z,r as P,u as G}from"./chunk-PSOV4KYA.js";import{j as N,n as k,o as x,p as B,q as J,r as K}from"./chunk-D65I6S5B.js";import{Ab as I,Bb as w,Cb as m,Eb as L,Ka as l,La as v,aa as b,ba as y,cb as S,da as d,ea as f,eb as c,la as M,nb as r,ob as s,oc as A,pb as C,qb as _,qc as T,sb as g,tb as p,yb as V,zb as E}from"./chunk-6KTIJOB7.js";function X(i,n){if(i&1){let a=_();r(0,"app-alert",6),g("close",function(){d(a);let e=p();return f(e.onHandleError())}),s()}if(i&2){let a=p();c("message",a.error)}}function Y(i,n){i&1&&(r(0,"div",7),C(1,"app-loading-spinner"),s())}function Z(i,n){if(i&1){let a=_();r(0,"p",18),g("click",function(){d(a);let e=p(2);return f(e.onSwitchMode())}),m(1,"Vous n'avez pas encore de compte ? "),r(2,"a",19),m(3,"Cliquer ici"),s()()}}function $(i,n){if(i&1){let a=_();r(0,"p",18),g("click",function(){d(a);let e=p(2);return f(e.onSwitchMode())}),m(1,"Vous avez d\xE9j\xE0 un compte ? "),r(2,"a",19),m(3,"Cliquer ici"),s()()}}function ee(i,n){if(i&1){let a=_();r(0,"form",8,9),g("ngSubmit",function(){d(a);let e=w(1),o=p();return f(o.onSubmit(e))}),r(2,"div",10)(3,"label",11),m(4,"E-Mail"),s(),C(5,"input",12),s(),r(6,"div",10)(7,"label",13),m(8,"Mot de passe"),s(),C(9,"input",14),s(),r(10,"div",15)(11,"button",16),m(12),s(),S(13,Z,4,0,"p",17)(14,$,4,0,"p",17),s()()}if(i&2){let a=w(1),t=p();l(11),c("disabled",!a.valid),l(),L(" ",t.isLoginMode?"Connexion":"Inscription"," "),l(),c("ngIf",t.isLoginMode),l(),c("ngIf",!t.isLoginMode)}}var U=(()=>{let n=class n{constructor(t,e){this.authService=t,this.router=e,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;let e=t.value.email,o=t.value.password,u;this.isLoading=!0,this.isLoginMode?u=this.authService.login(e,o):u=this.authService.signup(e,o),u.subscribe(h=>{console.log(h),this.isLoading=!1,this.router.navigate(["/recipes"])},h=>{console.log(h),this.error=h,this.isLoading=!1}),t.reset()}onHandleError(){this.error=null}showErrorAlert(t){let e=this.alertHost.viewContainerRef;e.clear();let o=e.createComponent(x);o.instance.message=t,this.closeSub=o.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),e.clear()})}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(v(j),v(N))},n.\u0275cmp=b({type:n,selectors:[["app-auth"]],viewQuery:function(e,o){if(e&1&&V(J,5),e&2){let u;E(u=I())&&(o.alertHost=u.first)}},decls:6,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-xs-12","col-md-6","offset-md-3"],[3,"message","close",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[3,"message","close"],[1,"text-center","mt-3"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","","placeholder","jean@gmail.com",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6","placeholder","6 caract\xE8res au minimum",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-success","btn-lg",3,"disabled"],["class","mt-4",3,"click",4,"ngIf"],[1,"mt-4",3,"click"],[1,"link-style"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),S(3,X,1,1,"app-alert",3)(4,Y,2,0,"div",4)(5,ee,15,4,"form",5),s()()()),e&2&&(l(3),c("ngIf",o.error),l(),c("ngIf",o.isLoading),l(),c("ngIf",!o.isLoading))},dependencies:[A,O,R,q,F,Q,P,z,H,D,x,B],styles:[".form-control[_ngcontent-%COMP%]{font-size:13px}.link-style[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"]});let i=n;return i})();var _e=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=y({type:n}),n.\u0275inj=M({imports:[T,G,K,k.forChild([{path:"",component:U}])]});let i=n;return i})();export{_e as AuthModule};
